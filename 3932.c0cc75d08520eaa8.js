"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3932],{3932:(M,l,r)=>{r.r(l),r.d(l,{DeliveryModule:()=>Z});var c=r(3071),p=r(5722),h=r(7255),e=r(6738),g=r(7827),C=r(4783),v=r(8630),n=r(6895),m=r(9224);function f(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"div",2)(1,"p"),e._uU(2,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"),e.qZA(),e.TgZ(3,"div",3)(4,"div",4)(5,"select",5),e.NdJ("optionChanged",function(o){const u=e.CHM(t).index,I=e.oxw();return e.KtG(I.additionalSubCategoryChanged(o,u))}),e.qZA()()()()}if(2&s){const t=d.$implicit;e.xp6(5),e.Q6J("noSelectActive",!0)("options",t)}}function y(s,d){if(1&s&&e._UZ(0,"div",11),2&s){const t=d.$implicit,i=e.oxw(2);e.Q6J("product",t)("preOrder",!0)("department",i.getDepartment(i.selectedCategoryId))("preDate",i.selectedDate)}}function S(s,d){if(1&s&&(e.TgZ(0,"div",9),e.YNc(1,y,1,4,"div",10),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.products)}}function D(s,d){1&s&&(e.TgZ(0,"div"),e._uU(1," \u041d\u0430 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u0442\u043e\u0432\u0430\u0440\u044b \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442 "),e.qZA())}const b=[{path:"",component:(()=>{class s{constructor(t,i,o){this.api=t,this.cartService=i,this.categoryService=o,this.datesOptions=[],this.categoriesOptions=[],this.subCategories=[],this.subCategoriesOptions=[],this.additionalSubCategories=[],this.additionalSubCategoriesOptions=[],this.products=[],this.productsLoaded=!1,this.selectedAdditionalSubCategoriesIds=[]}ngOnInit(){this.loadPredatesList()}dateChanged(t){this.productsLoaded=!1,this.cartService.isEmpty()||this.cartService.preOrderDate===t?(this.selectedDate=t,this.loadCategories(t)):(this.niceSelectDirectives.get(0).selected=this.selectedDate,this.confirmModal.openModal("\u0412 \u0442\u043e\u0432\u0430\u0440\u0435 \u0432 \u043f\u0443\u0442\u0438 \u0431\u0443\u0434\u0443\u0442 \u0442\u043e\u0432\u0430\u0440\u044b \u0441 \u0440\u0430\u0437\u043d\u044b\u0445 \u0434\u0430\u0442 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438!","\u0425\u043e\u0442\u0438\u0442\u0435 \u0441\u043c\u0435\u043d\u0438\u0442\u044c \u0434\u0430\u0442\u0443 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438? <br>\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u0435 \u043a\u043e\u0440\u0437\u0438\u043d\u0443!","\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u043e\u0440\u0437\u0438\u043d\u0443",()=>{this.cartService.clearCart(),this.niceSelectDirectives.get(0).selected=t,this.selectedDate=t,this.loadCategories(t),this.confirmModal.closeModal()}))}categoryChanged(t){this.productsLoaded=!1,this.cartService.isEmpty()||this.cartService.department===t?(this.selectedCategoryId=t,this.loadSubCategories(this.selectedCategoryId,this.selectedDate)):(this.niceSelectDirectives.get(1).selected=this.selectedCategoryId,this.confirmModal.openModal("\u0412 \u0442\u043e\u0432\u0430\u0440\u0430\u0445 \u0432 \u043f\u0443\u0442\u0438 \u0431\u0443\u0434\u0443\u0442 \u0442\u043e\u0432\u0430\u0440\u044b \u0438\u0437 \u0440\u0430\u0437\u043d\u044b\u0445 \u043e\u0442\u0434\u0435\u043b\u043e\u0432!","\u0414\u043b\u044f \u0441\u043c\u0435\u043d\u044b \u043e\u0442\u0434\u0435\u043b\u0430 \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u0435 \u0442\u043e\u0432\u0430\u0440\u044b \u0432 \u043f\u0443\u0442\u0438!","\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440\u044b \u0432 \u043f\u0443\u0442\u0438",()=>{this.cartService.clearCart(),this.niceSelectDirectives.get(1).selected=t,this.selectedCategoryId=t,this.loadSubCategories(t,this.selectedDate),this.confirmModal.closeModal()}))}subCategoryChanged(t){this.selectedSubCategoryId=t,this.subCategories.find(o=>o.id===t).child_id.length?this.loadAdditionalSubCategories(t,this.selectedDate,0):this.loadProducts(t,this.selectedDate)}additionalSubCategoryChanged(t,i){this.selectedAdditionalSubCategoriesIds[i]=t,this.additionalSubCategories[i].find(a=>a.id===t).child_id.length?this.loadAdditionalSubCategories(t,this.selectedDate,i+1):this.loadProducts(t,this.selectedDate)}getDepartment(t){return this.categoryService.getCategory(t).title}loadPredatesList(){this.api.getPredatesList().subscribe(t=>{this.datesOptions=t.map(i=>({key:i,value:i}))})}loadCategories(t){this.categoriesOptions=[],this.subCategories=[],this.subCategoriesOptions=[],this.additionalSubCategories=[],this.additionalSubCategoriesOptions=[],this.selectedAdditionalSubCategoriesIds=[],this.selectedCategoryId=null,this.selectedSubCategoryId=null,this.products=[],this.api.getChildPreCategories("0",t).subscribe(i=>{this.categoriesOptions=i.map(o=>({key:o.id,value:o.title})),i.length||(this.productsLoaded=!0)})}loadSubCategories(t,i){this.subCategories=[],this.subCategoriesOptions=[],this.additionalSubCategories=[],this.additionalSubCategoriesOptions=[],this.selectedAdditionalSubCategoriesIds=[],this.selectedSubCategoryId=null,this.products=[],this.api.getChildPreCategories(t,i).subscribe(o=>{this.subCategories=o,this.subCategoriesOptions=o.map(a=>({key:a.id,value:a.title}))})}loadAdditionalSubCategories(t,i,o){this.additionalSubCategories=this.additionalSubCategories.slice(0,o),this.additionalSubCategoriesOptions=this.additionalSubCategoriesOptions.slice(0,o),this.selectedAdditionalSubCategoriesIds=this.selectedAdditionalSubCategoriesIds.slice(0,o),this.products=[],this.api.getChildPreCategories(t,i).subscribe(a=>{this.additionalSubCategories[o]=a,this.additionalSubCategoriesOptions[o]=a.map(u=>({key:u.id,value:u.title}))})}loadProducts(t,i){this.productsLoaded=!1,this.api.getPreProductsList(t,i).subscribe(o=>{this.products=o,this.productsLoaded=!0})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(g.s),e.Y36(C.N),e.Y36(v.H))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-delivery-page"]],viewQuery:function(t,i){if(1&t&&(e.Gf(h.z,5),e.Gf(p.$,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.confirmModal=o.first),e.iGM(o=e.CRH())&&(i.niceSelectDirectives=o)}},decls:24,vars:9,consts:[[1,"perconal-data__inner","--white","warehouse"],[1,"perconal-data-filters"],[1,"perconal-data-filter"],[1,"perconal-data__inputs"],[1,"custom-select"],["appNiceSelect","",3,"noSelectActive","options","optionChanged"],["class","perconal-data-filter",4,"ngFor","ngForOf"],["class","products__items",4,"ngIf"],[4,"ngIf"],[1,"products__items"],["app-product","",3,"product","preOrder","department","preDate",4,"ngFor","ngForOf"],["app-product","",3,"product","preOrder","department","preDate"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p"),e._uU(4,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438"),e.qZA(),e.TgZ(5,"div",3)(6,"div",4)(7,"select",5),e.NdJ("optionChanged",function(a){return i.dateChanged(a)}),e.qZA()()()(),e.TgZ(8,"div",2)(9,"p"),e._uU(10,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"),e.qZA(),e.TgZ(11,"div",3)(12,"div",4)(13,"select",5),e.NdJ("optionChanged",function(a){return i.categoryChanged(a)}),e.qZA()()()(),e.TgZ(14,"div",2)(15,"p"),e._uU(16,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"),e.qZA(),e.TgZ(17,"div",3)(18,"div",4)(19,"select",5),e.NdJ("optionChanged",function(a){return i.subCategoryChanged(a)}),e.qZA()()()(),e.YNc(20,f,6,2,"div",6),e.qZA(),e.YNc(21,S,2,1,"div",7),e.YNc(22,D,2,0,"div",8),e.qZA(),e._UZ(23,"app-confirm-modal")),2&t&&(e.xp6(7),e.Q6J("noSelectActive",!0)("options",i.datesOptions),e.xp6(6),e.Q6J("noSelectActive",!0)("options",i.categoriesOptions),e.xp6(6),e.Q6J("noSelectActive",!0)("options",i.subCategoriesOptions),e.xp6(1),e.Q6J("ngForOf",i.additionalSubCategoriesOptions),e.xp6(1),e.Q6J("ngIf",i.products.length&&i.productsLoaded),e.xp6(1),e.Q6J("ngIf",!i.products.length&&i.productsLoaded))},dependencies:[n.sg,n.O5,p.$,m.F,h.z]}),s})()}];let A=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[c.Bz.forChild(b),c.Bz]}),s})();var O=r(1779);let Z=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[n.ez,O.m,A]}),s})()}}]);