"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9224],{9224:(k,_,o)=>{o.d(_,{F:()=>I});var t=o(6738),p=o(4006),C=o(5778),f=o(904),l=o(1955),u=o(3071),w=o(4783),x=o(4314),v=o(6895);let P=(()=>{class r{updateUrl(){this.src=this.default}load(){this.className="image-loaded"}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=t.lG2({type:r,selectors:[["img","default",""]],hostVars:3,hostBindings:function(e,c){1&e&&t.NdJ("error",function(){return c.updateUrl()})("load",function(){return c.load()}),2&e&&(t.Ikx("src",c.src,t.LSH),t.Tol(c.className))},inputs:{src:"src",default:"default"}}),r})();const Z=["app-product",""];function T(r,m){if(1&r&&(t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"number"),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij("-",t.xi3(2,1,e.getDiscount(e.product),"1.0-0"),"%")}}function a(r,m){1&r&&(t.TgZ(0,"div",13),t._uU(1,"\u041d\u043e\u0432\u0438\u043d\u043a\u0430"),t.qZA())}function n(r,m){if(1&r&&(t.TgZ(0,"div",17),t._uU(1),t.TgZ(2,"sup"),t._uU(3,"\u20bd"),t.qZA()()),2&r){const e=t.oxw(2);t.xp6(1),t.hij("",e.product.price," ")}}function i(r,m){if(1&r&&(t.TgZ(0,"div",14)(1,"div",15),t.YNc(2,n,4,1,"div",16),t._uU(3),t.ALo(4,"currency"),t.TgZ(5,"sup"),t._uU(6,"\u20bd"),t.qZA()(),t.TgZ(7,"p"),t._uU(8),t.qZA()()),2&r){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.product.discount_price),t.xp6(1),t.hij(" ",t.Dn7(4,3,e.getPrice(e.product),void 0,"")," "),t.xp6(5),t.hij("\u041d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435 ",e.product.count," \u0448\u0442.")}}function s(r,m){if(1&r){const e=t.EpF();t.TgZ(0,"div",18)(1,"button",19),t.NdJ("click",function(){t.CHM(e);const d=t.oxw();return t.KtG(d.decreaseProductCount(d.product))}),t.qZA(),t._UZ(2,"input",20),t.TgZ(3,"button",21),t.NdJ("click",function(){t.CHM(e);const d=t.oxw();return t.KtG(d.increaseProductCount(d.product))}),t.qZA()(),t.TgZ(4,"button",22),t.NdJ("click",function(d){t.CHM(e);const g=t.oxw();return t.KtG(g.openBasket(d))}),t.O4$(),t.TgZ(5,"svg",23),t._UZ(6,"path",24)(7,"path",25)(8,"path",26)(9,"path",27)(10,"path",28),t.qZA(),t._uU(11," \u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443 "),t.qZA()}if(2&r){const e=t.oxw();t.xp6(2),t.Q6J("formControl",e.countFormControl)("step",e.product.pack)("value",e.getProductCount(e.product.id))}}function h(r,m){if(1&r){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(e);const d=t.oxw();return t.KtG(d.callPhone())}),t._uU(1,"\u0417\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0446\u0435\u043d\u0443"),t.qZA()}}const b=function(){return[]};let I=(()=>{class r{constructor(e,c,d,g){this.router=e,this.cartService=c,this.optionsService=d,this.elementRef=g,this.preOrder=!1,this.preDate="",this.department="",this.departmentChanged=new t.vpe,this.linkClicked=new t.vpe,this.countFormControl=new p.NI(0)}ngOnInit(){this.subscribeToOptions(),this.configureParentElement(),this.subscribeToInputChanges(),this.countFormControl.setValue(this.getProductCount(this.product.id),{emitEvent:!1})}decreaseProductCount(e){this.checkForPreOrder(),this.cartService.decreaseProductCount(e)}getDiscount(e){return this.cartService.getDiscount(e)}getProductCount(e){return this.cartService.getProductCount(e)}getPrice(e){return this.cartService.getPrice(e)}increaseProductCount(e){this.checkForPreOrder(),!this.cartService.isEmpty()&&this.department&&this.department!==this.cartService.department?this.departmentChanged.emit(e):(this.cartService.setDepartment(this.department),this.cartService.increaseProductCount(e))}openBasket(e){e.preventDefault(),this.cartService.getCartItemsSnapshot().length&&this.router.navigate(["/checkout"])}getQueryParams(){return this.preDate?{date:this.preDate}:{}}callPhone(){window.location.href=`tel:${this.phone}`}linkClick(){this.linkClicked.observers.length?this.linkClicked.emit(this.product):this.router.navigate(["/product",this.product.id],{queryParams:this.getQueryParams()})}subscribeToOptions(){this.optionsService.getOptions().subscribe(e=>{this.noImgAddress=e.acf.opt_noimg_prod,this.phone=e.acf.opt_phone})}checkForPreOrder(){this.cartService.setPreOrderDate(this.preDate)}configureParentElement(){const e=this.elementRef.nativeElement;e.classList.add("product"),this.product.price||e.classList.add("product--no")}subscribeToInputChanges(){this.countFormControl.valueChanges.pipe((0,C.x)(),(0,f.b)(1e3)).subscribe(e=>{const c=(0,l.n)(this.product.pack,e);this.checkForMinMaxAndSet(c)}),this.countFormControl.valueChanges.subscribe(e=>{this.checkForMinMaxAndSet(e)})}checkForMinMaxAndSet(e){const c=(0,l.J)(0,this.product.count,e);this.countFormControl.setValue(+c,{emitEvent:!1}),this.cartService.setProductCount(this.product,c)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(u.F0),t.Y36(w.N),t.Y36(x.I),t.Y36(t.SBq))},r.\u0275cmp=t.Xpm({type:r,selectors:[["","app-product",""]],inputs:{product:"product",preOrder:"preOrder",preDate:"preDate",department:"department"},outputs:{departmentChanged:"departmentChanged",linkClicked:"linkClicked"},attrs:Z,decls:15,vars:11,consts:[["class","product-label --sale",4,"ngIf"],["class","product-label --new",4,"ngIf"],[1,"product-inner",3,"routerLink","click"],[1,"product__img"],["alt","",3,"src","default"],[1,"product__info"],[1,"product__name"],[1,"product__descr"],["class","product__box",4,"ngIf"],[1,"product-bottom"],[3,"ngIf","ngIfElse"],["requestPrice",""],[1,"product-label","--sale"],[1,"product-label","--new"],[1,"product__box"],[1,"product__price"],["class","price-old",4,"ngIf"],[1,"price-old"],[1,"quantity-controls__container"],[1,"quantity-controls__dec",3,"click"],["type","number","min","0","max","",1,"quantity-controls__value",3,"formControl","step","value"],[1,"quantity-controls__inc",3,"click"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","width","491","height","490","viewBox","0 0 491 490","fill","none"],["d","M420.042 349.17H140.042C136.023 349.279 132.085 347.998 128.897 345.541C125.71 343.088 123.464 339.611 122.542 335.693L55.167 47.643L11.94 34.166C7.53375 32.6816 3.89305 29.5059 1.82695 25.338C-0.239146 21.1701 -0.56755 16.3497 0.91679 11.94C2.40119 7.53375 5.57699 3.89305 9.74489 1.82695C13.9128 -0.239148 18.7332 -0.567548 23.1429 0.916792L75.6429 18.4168C81.3382 20.0574 85.8149 24.4715 87.5409 30.1438L105.041 104.167H472.541C477.928 104.139 483.025 106.593 486.365 110.815C489.681 115.077 490.845 120.632 489.517 125.866L437.017 335.866C436.076 339.659 433.896 343.03 430.822 345.44C427.744 347.854 423.951 349.163 420.041 349.167L420.042 349.17ZM153.862 314.17H406.392L450.142 139.17H112.742L153.862 314.17Z"],["d","M175.042 489.17C161.116 489.17 147.765 483.638 137.917 473.795C128.074 463.947 122.542 450.596 122.542 436.67C122.542 422.744 128.074 409.393 137.917 399.545C147.765 389.701 161.116 384.17 175.042 384.17C188.968 384.17 202.319 389.701 212.167 399.545C222.011 409.392 227.542 422.744 227.542 436.67C227.542 450.596 222.011 463.947 212.167 473.795C202.32 483.638 188.968 489.17 175.042 489.17ZM175.042 419.17C170.402 419.17 165.949 421.013 162.667 424.295C159.386 427.576 157.542 432.029 157.542 436.67C157.542 441.31 159.386 445.763 162.667 449.045C165.949 452.326 170.402 454.17 175.042 454.17C179.683 454.17 184.136 452.326 187.417 449.045C190.699 445.763 192.542 441.31 192.542 436.67C192.542 432.029 190.699 427.576 187.417 424.295C184.136 421.013 179.683 419.17 175.042 419.17Z"],["d","M385.042 489.17C371.116 489.17 357.765 483.638 347.917 473.795C338.074 463.947 332.542 450.596 332.542 436.67C332.542 422.744 338.074 409.393 347.917 399.545C357.765 389.701 371.116 384.17 385.042 384.17C398.968 384.17 412.319 389.701 422.167 399.545C432.011 409.392 437.542 422.744 437.542 436.67C437.542 450.596 432.011 463.947 422.167 473.795C412.32 483.638 398.968 489.17 385.042 489.17ZM385.042 419.17C380.402 419.17 375.949 421.013 372.667 424.295C369.386 427.576 367.542 432.029 367.542 436.67C367.542 441.31 369.386 445.763 372.667 449.045C375.949 452.326 380.402 454.17 385.042 454.17C389.683 454.17 394.136 452.326 397.417 449.045C400.699 445.763 402.542 441.31 402.542 436.67C402.542 432.029 400.699 427.576 397.417 424.295C394.136 421.013 389.683 419.17 385.042 419.17Z"],["d","M350.042 209.17H210.042C203.789 209.17 198.011 205.834 194.886 200.42C191.761 195.006 191.761 188.334 194.886 182.92C198.011 177.506 203.789 174.17 210.042 174.17H350.042C356.296 174.17 362.073 177.506 365.198 182.92C368.323 188.334 368.323 195.006 365.198 200.42C362.073 205.834 356.296 209.17 350.042 209.17Z"],["d","M332.542 279.17H227.542C221.289 279.17 215.511 275.834 212.386 270.42C209.261 265.006 209.261 258.334 212.386 252.92C215.511 247.506 221.289 244.17 227.542 244.17H332.542C338.796 244.17 344.573 247.506 347.698 252.92C350.823 258.334 350.823 265.006 347.698 270.42C344.573 275.834 338.796 279.17 332.542 279.17Z"]],template:function(e,c){if(1&e&&(t.YNc(0,T,3,4,"div",0),t.YNc(1,a,2,0,"div",1),t.TgZ(2,"a",2),t.NdJ("click",function(){return c.linkClick()}),t.TgZ(3,"div",3),t._UZ(4,"img",4),t.qZA(),t.TgZ(5,"div",5)(6,"div",6),t._uU(7),t.qZA(),t.TgZ(8,"div",7),t._uU(9),t.qZA(),t.YNc(10,i,9,7,"div",8),t.qZA()(),t.TgZ(11,"div",9),t.YNc(12,s,12,3,"ng-template",10),t.YNc(13,h,2,0,"ng-template",null,11,t.W1O),t.qZA()),2&e){const d=t.MAs(14);let g;t.Q6J("ngIf",c.product.discount_price),t.xp6(1),t.Q6J("ngIf",!c.product.discount_price),t.xp6(1),t.Q6J("routerLink",t.DdM(10,b)),t.xp6(2),t.Q6J("src",null!==(g=c.product.photo)&&void 0!==g?g:c.noImgAddress,t.LSH)("default",c.noImgAddress),t.xp6(3),t.Oqu(c.product.title),t.xp6(2),t.Oqu(c.product.description),t.xp6(1),t.Q6J("ngIf",c.product.price),t.xp6(2),t.Q6J("ngIf",c.product.price)("ngIfElse",d)}},dependencies:[v.O5,p.Fj,p.wV,p.JJ,p.qQ,p.Fd,p.oH,u.yS,P,v.JJ,v.H9]}),r})()},1955:(k,_,o)=>{function t(C,f,l){let u;return u=l>f?f:l<0?0:l,u}function p(C,f){let l=f;return l%C!=0&&(l=Math.floor(l/C)*C+C),l}o.d(_,{J:()=>t,n:()=>p})},904:(k,_,o)=>{o.d(_,{b:()=>v});var t=o(3489),p=o(2654);class C extends p.w{constructor(n,i){super()}schedule(n,i=0){return this}}let l=(()=>{class a{constructor(i,s=a.now){this.SchedulerAction=i,this.now=s}schedule(i,s=0,h){return new this.SchedulerAction(this,i).schedule(h,s)}}return a.now=()=>Date.now(),a})();class u extends l{constructor(n,i=l.now){super(n,()=>u.delegate&&u.delegate!==this?u.delegate.now():i()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(n,i=0,s){return u.delegate&&u.delegate!==this?u.delegate.schedule(n,i,s):super.schedule(n,i,s)}flush(n){const{actions:i}=this;if(this.active)return void i.push(n);let s;this.active=!0;do{if(s=n.execute(n.state,n.delay))break}while(n=i.shift());if(this.active=!1,s){for(;n=i.shift();)n.unsubscribe();throw s}}}const x=new u(class f extends C{constructor(n,i){super(n,i),this.scheduler=n,this.work=i,this.pending=!1}schedule(n,i=0){if(this.closed)return this;this.state=n;const s=this.id,h=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(h,s,i)),this.pending=!0,this.delay=i,this.id=this.id||this.requestAsyncId(h,this.id,i),this}requestAsyncId(n,i,s=0){return setInterval(n.flush.bind(n,this),s)}recycleAsyncId(n,i,s=0){if(null!==s&&this.delay===s&&!1===this.pending)return i;clearInterval(i)}execute(n,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const s=this._execute(n,i);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,i){let h,s=!1;try{this.work(n)}catch(b){s=!0,h=!!b&&b||new Error(b)}if(s)return this.unsubscribe(),h}_unsubscribe(){const n=this.id,i=this.scheduler,s=i.actions,h=s.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==h&&s.splice(h,1),null!=n&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null}});function v(a,n=x){return i=>i.lift(new P(a,n))}class P{constructor(n,i){this.dueTime=n,this.scheduler=i}call(n,i){return i.subscribe(new Z(n,this.dueTime,this.scheduler))}}class Z extends t.L{constructor(n,i,s){super(n),this.dueTime=i,this.scheduler=s,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(n){this.clearDebounce(),this.lastValue=n,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(T,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:n}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(n)}}clearDebounce(){const n=this.debouncedSubscription;null!==n&&(this.remove(n),n.unsubscribe(),this.debouncedSubscription=null)}}function T(a){a.debouncedNext()}}}]);